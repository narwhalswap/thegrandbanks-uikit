#!/usr/bin/env node

const { readdirSync, writeFileSync } = require('fs')
const { basename, join } = require('path')

const green = '\x1b[32m'
const white = '\x1b[37m'

const filePath = join(__dirname, '../apps/index.js')

let content = ''

content += `
// This file has been generated by running scripts/update-apps-index.js.
// Do not edit, manual changes will be overwritten.

`

content += readdirSync(__dirname + '/../apps')
  .filter(f => f !== 'index.js' && /\.js$/.test(f))
  .map(f => basename(f, '.js'))
  .map(f => `export { default as ${f} } from './${f}'`)
  .join('\n')

writeFileSync(filePath, `${content}\n`)

console.log(`${green}Updated apps index${white} âˆ’ ${filePath}`)
console.log('')
